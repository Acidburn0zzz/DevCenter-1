---

title: Running ibm-mobilefirst-starter container locally
date: 2015-10-25 14:05:45.000000000 +02:00
type: post
published: true
status: publish
categories:
- Mobile
tags:
- bluemix
- MobileFirst_Platform
meta:
  _wpcom_is_markdown: '1'
  _edit_last: '6643'
  _syntaxhighlighter_encoded: '1'
  _rawhtml_settings: '0,0,0,0'
  oasis_is_in_workflow: '0'
  _wpas_done_all: '1'
  oasis_current_revision: '18830'
author:
  login: srinivasan.nanduri@in.ibm.com
  email: srinivasan.nanduri@in.ibm.com
  display_name: SrinivasanNanduri
  first_name: Srinivasan
  last_name: Nanduri
---
<p>If you have tried an evaluation of MobileFirst Platform Foundation using the <a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-7-1/bluemix/evaluate-foundation-on-bluemix">ibm-mobilefirst-starter</a> image on <a href="https://www.ng.bluemix.net/docs/">IBM Bluemix</a>, you might have wondered:</p>
<ul>
<li> How do I run the container locally on my computer? </li>
<li> How do I add and run my own projects? </li>
</ul>
<p>The purpose of this blog is to provide answers to these questions.</p>
<h2> Before you begin </h2>
<p>When running the ibm-mobilefirst-starter image, you created a Docker container that was instantiated from the image. To run the container locally, complete the following steps:</p>
<ol>
<li> Install <a href="https://docs.docker.com/installation/">Docker</a>.</li>
<li> Install Cloud Foundry CLI and the Cloud Foundry plugin for IBM Containers. Follow the instructions <a href="https://www.ng.bluemix.net/docs/containers/container_cli_ov.html#container_cli_cfic">here</a>.</li>
<li>Pull the image from the IBM Containers registry:
<ul>
<li>
 Open the terminal.</li>
<li>Login to the Bluemix and to the IBM Container Service / Registry to access the image. Detailed instructions <a href="https://www.ng.bluemix.net/docs/containers/container_cli_ov.html#container_cli_login">here</a>.<br />
[code]<br />
cf login<br />
cf ic login<br />
[/code]
</li>
<li> Pull the image.<br />
[code]<br />
docker pull registry.ng.bluemix.net/ibm-mobilefirst-starter<br />
[/code]
</li>
</ul>
</li>
</ol>
<p><b>Note:</b> The terminal referred to in this blog is the Docker terminal i.e., if you're using Docker Toolbox, the Docker Quickstart Terminal.</p>
<h2>Run the image</h2>
<p>To run the image locally, run the following command from the terminal. Ensure the username and password for logging into the MobileFirst Operations console / MobileFirst Analytics console are provided within the command.</p>
<p>[code]<br />
docker run -d -p 9080:9080 -e MFPF_ADMIN_USERNAME=&lt;username&gt; -e MFPF_ADMIN_PASSWORD=&lt;password&gt; registry.ng.bluemix.net/ibm-mobilefirst-starter[/code]</p>
<h2>Run the image with your projects</h2>
<p>To add your own project(s) and optionally remove the MobileFirstStarter sample project, complete the following steps:</p>
<ol>
<li>Create a directory on your machine with a name of your choice.</li>
<li>Create a Dockerfile (file named Dockerfile) in the directory and add the following to the Dockerfile.
<p>[code]<br />
FROM registry.ng.bluemix.net/ibm-mobilefirst-starter:latest<br />
[/code]
</li>
<li>Add your project to the directory (For example, HelloMFP.war)</li>
<li>Create an XML file using the same project name (for example, HelloMFP.xml), and add the following code snippet (modified with the correct project name):<br />
<br />
<b>Contents of HelloMFP.xml</b><br />
[code lang="xml"]<br />
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />
&lt;server description=&quot;new server&quot;&gt;<br />
	&lt;application context-root=&quot;/HelloMFP&quot; id=&quot;HelloMFP&quot; location=&quot;HelloMFP.war&quot; name=&quot;HelloMFP&quot; type=&quot;war&quot;&gt;<br />
    	&lt;classloader delegation=&quot;parentLast&quot;&gt;<br />
        	&lt;privateLibrary id=&quot;worklightlib_HelloMFP&quot;&gt;<br />
           		&lt;fileset dir=&quot;${shared.resource.dir}&quot; includes=&quot;worklight-jee-library.jar&quot;/&gt;.<br />
    	   		&lt;fileset dir=&quot;${wlp.install.dir}/lib&quot; includes=&quot;com.ibm.ws.crypto.passwordutil*.jar&quot;/&gt;<br />
        	&lt;/privateLibrary&gt;<br />
    	&lt;/classloader&gt;<br />
	&lt;/application&gt;<br />
	&lt;!-- Declare the IBM MobileFirst Server database. --&gt;<br />
	&lt;dataSource jndiName=&quot;HelloMFP/jdbc/WorklightDS&quot; transactional=&quot;false&quot;&gt;<br />
    	&lt;jdbcDriver libraryRef=&quot;DerbyLib&quot;/&gt;<br />
    	&lt;properties.derby.embedded createDatabase=&quot;create&quot; databaseName=&quot;${shared.resource.dir}/derbyDB/HelloMFP/WRKLGHT&quot; user=&quot;WORKLIGHT&quot;/&gt;<br />
	&lt;/dataSource&gt;<br />
	&lt;!-- Define any other IBM MobileFirst Server properties here --&gt;<br />
	&lt;jndiEntry value=&quot;false&quot; jndiName=&quot;HelloMFP/mfp.session.independent&quot;/&gt;<br />
	&lt;jndiEntry value=&quot;httpsession&quot; jndiName=&quot;HelloMFP/mfp.attrStore.type&quot;/&gt;<br />
 &lt;/server&gt;<br />
[/code]
</li>
<li>Add the following to the Dockerfile created in (2). Ensure to replace the 'HelloMFP' with the name of your project.
<p>[code]<br />
COPY HelloMFP.xml /opt/ibm/wlp/usr/servers/defaultServer/configDropins/overrides/<br />
COPY HelloMFP.war /opt/ibm/wlp/usr/servers/defaultServer/apps/<br />
[/code]</p>
<p><b>Note:</b> Repeat steps (3), (4) and (5) for every project you want to add to the image.
</li>
<li>If you wish to remove the MobileFirstStarter project, add the following to the Dockerfile created in (2).
<p>[code]<br />
RUN rm /opt/ibm/wlp/usr/servers/defaultServer/configDropins/overrides/MobileFirstStarter.xml<br />
RUN rm /opt/ibm/wlp/usr/servers/defaultServer/apps/MobileFirstStarter.war<br />
[/code]</p>
</li>
<li>Build the image with the new Dockerfile. Ensure you run the command from within the directory created in (1) and specify the name of the tag for tagging the image in the command.
<p>[code]<br />
docker build -t &lt;name of the tag&gt; .<br />
[/code]</p>
</li>
<li>Run the image using the following command (modified with your username and password for the MobileFirst Operations Console / MobileFirst Analytics Console and the correct tag name).
<p>[code]<br />
docker run -d -p 9080:9080 -e MFPF_ADMIN_USERNAME=&lt;username&gt; -e MFPF_ADMIN_PASSWORD=&lt;password&gt; &lt;name of the tag&gt;[/code]
</li>
</ol>
<div style="width:auto;height:auto;border:1px solid #000"><b>Disclaimer:</b> <i> The solution discussed herein is from my own personal experience as a developer using the MobileFirst platform and do not represent IBM's view nor IBM's interest in supporting this officially.</i></div>
