---
layout: doc_page
title: 'NEW: Windows 8 - Adding native functionality to hybrid application with Apache
  Cordova plugin'
date: 
type: doc_page
published: false
status: private
categories: []
tags:
- 7-0
meta:
  _wpcom_is_markdown: '1'
  _edit_last: '6643'
  _syntaxhighlighter_encoded: '1'
  _wpas_done_all: '1'
author:
  login: iadar@il.ibm.com
  email: IADAR@il.ibm.com
  display_name: IdanAdar
  first_name: IDAN
  last_name: ADAR
---
<p class="breadcrumbs">
 &lt; ... <a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-7-0/adding-native-functionality/">Adding native functionality to hybrid applications</a></p>
<div id="samplesAndPersonas">
<div>
    Relevant to:</p>
<ul id="relevantForPersona">
<li class="hybrid"><a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-hybrid-development-7-0/">Hybrid</a></li>
</ul>
</div>
<ul>
<li class="download-sample">
          <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v700/ApacheCordovaPluginsProject.zip">Download Studio project</a>
        </li>
</ul>
</div>
<h2>Overview</h2>
<p>In some cases, developers of a MobileFirst application might have to use a specific third-party native library or a device function that is not yet available in Apache Cordova.</p>
<p>With Apache Cordova, developers can create an Apache Cordova plug-in, which means that they create custom native code blocks, and call these code blocks in their applications by using JavaScript.</p>
<p>In this tutorial, a simple Apache Cordova plug-in creation and integration for Windows 8 will be demonstrated.</p>
<h3>Note:</h3>
<p>In Cordova-based applications, developers must check for the <span class="inline-code">deviceready</span> event before they use the Cordova API set. In a MobileFirst application, however, this check is done internally.</p>
<p>Instead of implementing this check, implementation code can be placed in the <span class="inline-code">wlCommonInit()</span> function in <span class="inline-code">common\js\main.js</span>.</p>
<p>
The below code blocks are based on the sample application, provided at the bottom of this tutorial.</p>
<h3>Plug-in creation overview:</h3>
<ul>
<li>Declare the plug-in in the config.xml file</li>
<li>Use the <span class="inline-code">cordova.exec()</span> API in the JavaScript code</li>
<li>Create the plug-in class that will run natively in Windows Phone 8</li>
<li>The plug-in performs the required action and calls a JavaScript callback method that is specified during the call to <span class="inline-code">cordova.exec()</span></li>
</ul>
<p><a href="https://developer.ibm.com/mobileplatform/wp-content/uploads/sites/32/2014/07/07_07_overview.png"><img src="{{ site.baseurl }}/assets/07_07_overview.png" alt="07_07_overview" width="852" height="234" class="aligncenter size-full wp-image-1046" /></a></p>
<h2>Declaring a plug-in</h2>
<p>The plug-in needs to be declared in the project, so that Cordova can detect it.<br />
To declare the plug-in, add a reference to the config.xml file, located in the native folder of the Windows Phone 8 environment.</p>
<p>[code lang="xml"]&lt;feature name=“sayHelloPlugin&quot;&gt;<br />
  &lt;param name=&quot;wp-package&quot; value=“sayHelloPlugin&quot; /&gt;<br />
&lt;/feature&gt;[/code]</p>
<h2>Implementing cordova.exec() in JavaScript</h2>
<p>From the JavaScript code of the application, <span class="inline-code">cordova.exec()</span> should is used to call the Cordova plug-in:<br />
[code lang="js"]function sayHello() {<br />
    var name = $(&quot;#NameInput&quot;).val();<br />
    cordova.exe(sayHelloSuccess, sayHelloFailure, &quot;SayHelloPlugin&quot;, &quot;sayHello&quot;, [name]);<br />
}[/code]</p>
<p><br clear="all" /><br />
<span class="inline-code">sayHelloSuccess</span> - Success callback<br />
<span class="inline-code">sayHelloFailure</span> - Failure callback<br />
<span class="inline-code">SayHelloPlugin</span> - Plug-in name as declared in config.xml<br />
<span class="inline-code">sayHello</span> - Action name<br />
<span class="inline-code">[name]</span> - Parameters array</p>
<p>The plug-in calls the <span class="inline-code">success</span> and <span class="inline-code">failure</span> callbacks.<br />
[code lang="js" firstline="5"]<br />
function sayHelloSuccess(data){<br />
    WL.SimpleDialog.show(<br />
        &quot;Response from plug-in&quot;, data,<br />
  [{text: &quot;OK&quot;, handler: function() {WL.Logger.debug(&quot;Ok button pressed&quot;);}}]<br />
    );<br />
}</p>
<p>function sayHelloFailure(data){<br />
    WL.SimpleDialog.show(<br />
  &quot;Response from plug-in&quot;, data,<br />
  [{text: &quot;OK&quot;, handler: function() {WL.Logger.debug(&quot;Ok button pressed&quot;);}}]<br />
    );<br />
}[/code]</p>
<h2>Implementing the C# code of a Cordova plug-in</h2>
<p>After the plug-in is declared, and the JavaScript implementation is ready, the Cordova plug-in can be implemented.<br />
For this purpose, ensure that the project is built in Eclipse and opened in the Visual Studio IDE.</p>
<h4>Step 1</h4>
<ul>
<li>Create a new C# class</li>
<li>Add the new class to your project namespace and add the required import statements.</li>
<p>    [code lang="csharp"]using System;<br />
using System.Collections.Generic;<br />
using System.Linq;<br />
using System.Text;<br />
using System.Threading.Tasks;</p>
<p>using WPCordovaClassLib.Cordova;<br />
using WPCordovaClassLib.Cordova.Commands;<br />
using WPCordovaClassLib.Cordova.JSON;</p>
<p>namespace Cordova.Extension.Commands<br />
{<br />
    public class SayHelloPlugin : BaseCommand<br />
    {[/code]
</ul>
<h4>Step 2</h4>
<p>Implement the <span class="inline-code">SayHelloPlugin</span> class and the <span class="inline-code">sayHello</span> method.</p>
<ul>
<li>The JavaScript wrapper calls the sayHello method and passes a single parameter. It returns a string back to JavaScript.<br />
    [code lang="csharp" firstline="15"]public void sayHello(string options)<br />
        {<br />
            string optVal = null;<br />
            try {<br />
                optVal = JsonHelper.Deserialize&lt;string[]&gt;(options)[0];<br />
            }<br />
            catch (Exception) {<br />
                DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR, &quot;SayHelloPlugin signaled an error&quot;));<br />
            }[/code]</li>
<p><br clear="all" /></p>
<li>The DispatchCommandResult method returns the result to JavaScript, whether success or failure.<br />
[code lang="csharp" firstline="24"]if (optVal == null)<br />
            {<br />
                DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR, &quot;Got null value as input&quot;));<br />
            }<br />
            else<br />
            {<br />
                DispatchCommandResult(new PluginResult(PluginResult.Status.OK, &quot;Hello &quot; + optVal));<br />
            }<br />
        }<br />
    }<br />
}[/code]</li>
</ul>
<h2>Sample application</h2>
<p><a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v700/ApacheCordovaPluginsProject.zip">Click to download</a> the Studio project.</p>
<p><a href="https://developer.ibm.com/mobileplatform/wp-content/uploads/sites/32/2014/07/07_07_sample_app.png"><img src="{{ site.baseurl }}/assets/07_07_sample_app.png" alt="07_07_sample_app" width="598" height="381" class="aligncenter size-full wp-image-1051" /></a></p>
