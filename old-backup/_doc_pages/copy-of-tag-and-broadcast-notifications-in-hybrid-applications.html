---
layout: doc_page
title: Copy of - Tag and Broadcast Notifications in Hybrid Applications
date: 
type: doc_page
published: false
status: draft
categories: []
tags:
- 7-2
meta:
  _syntaxhighlighter_encoded: '1'
  _wpcom_is_markdown: '1'
  _wpas_done_all: '1'
  oasis_original: '17350'
  _edit_last: '32413'
  oasis_is_in_workflow: '1'
author:
  login: tcheng@us.ibm.com
  email: tcheng@us.ibm.com
  display_name: DoraC
  first_name: Theodora
  last_name: Cheng
---
<p class="breadcrumbs">
 &lt; <a href="../../../">Notifications</a> &lt; <a href="../../">Push Notifications Overview</a>  &lt; <a href="../">Push Notifications in Hybrid Applications</a></p>
<div id="samplesAndPersonas">
<div>
    Relevant to:</p>
<ul id="relevantForPersona">
<li class="hybrid">Hybrid</li>
</ul>
</div>
<ul>
<li class="download-sample">
<a href="https://github.com/MobileFirst-Platform-Developer-Center/TagNotifications" target="_blank">Download MobileFirst project</a>
        </li>
</ul>
</div>
<h2>Overview</h2>
<p><strong>Prerequisite: </strong> Make sure to read the <a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-7-1/notifications/push-notifications-overview/push-notifications-in-hybrid-applications/" title="Push Notifications in Hybrid Applications">Push Notifications in Hybrid Applications</a> tutorial first.</p>
<p>Tag notifications are notification messages that are targeted to all the devices that are subscribed to a particular tag.<br />
Tags represent topics of interest to the user and provide the ability to receive notifications according to the chosen interest.</p>
<p>Broadcast notifications are a form of tag push notifications that are targeted to all subscribed devices. Broadcast notifications are enabled by default for any push-enabled MobileFirst application by a subscription to a reserved <code>Push.all</code> tag (auto-created for every device). Broadcast notifications can be disabled by by unsubscribing from the reserved <code>Push.all</code> tag.</p>
<h3>Agenda</h3>
<ul>
<li><a href="#configuration">Notifications configuration</a></li>
<li><a href="#notificationsAPI">Notifications API</a></li>
<li><a href="#sampleApplication">Sample application</a></li>
</ul>
<h2 id="configuration">Notifications configuration</h2>
<h3>Tag Notifications configuration</h3>
<h4>Setting up tags</h4>
<p>Tags are defined in the <code>application-descriptor.xml</code> file:</p>
<p>[code lang="xml"]&lt;application xmlns=&quot;http://www.worklight.com/application-descriptor&quot; id=&quot;HybridTagNotifications&quot; platformVersion=&quot;7.0.0.00.20150312-0731&quot;&gt;<br />
...<br />
...<br />
...<br />
&lt;tags&gt;<br />
    &lt;tag&gt;<br />
        &lt;name&gt;my tag 1&lt;/name&gt;<br />
        &lt;description&gt;About my tag 1&lt;/description&gt;<br />
    &lt;/tag&gt;<br />
    &lt;tag&gt;<br />
        &lt;name&gt;my tag 2&lt;/name&gt;<br />
        &lt;description&gt;About my tag 2&lt;/description&gt;<br />
    &lt;/tag&gt;<br />
&lt;/tags&gt;[/code]</p>
<h2 id="notificationsAPI">Notifications API</h2>
<h3>API methods for tag notifications</h3>
<h4>Client-side API</h4>
<ul>
<li><span class="inline-code">WL.Client.Push.subscribeTag(tagName,options)</span> - Subscribes the device to the specified tag name.</li>
<li><span class="inline-code">WL.Client.Push.unsubscribeTag(tagName,options)</span> - Unsubscribes the device from the specified tag name.</li>
<li><span class="inline-code">WL.Client.Push.isPushSupported()</span> - Returns <code>true</code> if push notifications are supported by the platform, or <code>false</code> otherwise.</li>
<li><span class="inline-code">WL.Client.Push.isTagSubscribed(tagName)</span> - Returns whether the device is subscribed to a specified tag name.</li>
</ul>
<h3>Common API methods for tag and broadcast notifications</h3>
<h4>Client-side API</h4>
<p><code>WL.Client.Push.onMessage (props, payload)</code><br />
This method is called when a push notification is received by the device.<br />
[code lang="js"]<br />
WL.Client.Push.onMessage = function (props, payload) {<br />
    WL.Client.Push.onMessage = function (props, payload) {<br />
        WL.SimpleDialog.show(&quot;Tag Notifications&quot;, &quot;Provider notification data: &quot; + JSON.stringify(props), [ {<br />
            text : 'Close',<br />
            handler : function() {<br />
                WL.SimpleDialog.show(&quot;Tag Notifications&quot;, &quot;Application notification data: &quot; + JSON.stringify(payload), [ {<br />
                    text : 'Close',<br />
                    handler : function() {}<br />
                  }]);<br />
            }<br />
        }]);<br />
    };<br />
}<br />
[/code]</p>
<ul>
<li><strong>props</strong> - A JSON block that contains the notification properties of the platform.</li>
<li><strong>payload</strong> - A JSON block that contains other data that is sent from MobileFirst Server. The JSON block also contains the tag name for tag-based or broadcast notification. The tag name appears in the "tag" element. For broadcast notification, the default tag name is <span class="inline-code">Push.ALL</span>.</li>
</ul>
<h4>Server-side API</h4>
<p><code>WL.Server.sendMessage(applicationId,notificationOptions)</code><br />
This method submits a notification based on the specified target parameters.<br />
<strong>applicationId</strong>&nbsp;- (mandatory) The name of the MobileFirst application.<br />
<strong>notificationOptions</strong>&nbsp;- (mandatory) A JSON block containing message properties.</p>
<blockquote><p>For more information about tag and broadcast notifications, see the "tag-based notification" and "broadcast notification" topics in the user documentation.</p></blockquote>
<h2 id="sampleApplication">Sample application</h2>
<p><a href="https://github.com/MobileFirst-Platform-Developer-Center/TagNotifications" target="_blank">Click to download</a> the MobileFirst project.</p>
<p>The provided sample application demonstrates how to send a broadcast notification to the default auto-subscribed <code>push.ALL</code> tag.<br />
The sample also demonstrates how to send notifications to two predefined tags, sample-tag1 and sample-tag2, to which the user can subscribe in the application.</p>
<p><a href="https://developer.ibm.com/mobilefirstplatform/wp-content/uploads/sites/32/2015/04/Screenshot_2015-08-30-11-48-08.png"><img src="{{ site.baseurl }}/assets/Screenshot_2015-08-30-11-48-08.png" alt="Screenshot_2015-08-30-11-48-08" width="281" height="500" class="aligncenter size-full wp-image-16911" /></a></p>
<h3>Sending a notification</h3>
<p>To get the app running:<br />
1. Create a MFP Cordova Application<br />
[code lang="shell"]<br />
$ mfp cordova create<br />
[?] Enter name of app: PushNotifications<br />
[?] Enter the package ID: com.ibm.PushNotifications<br />
[?] Enter the app version: 1.0.0<br />
[?] Select platforms to be supported by your app: android, ios<br />
[?] Select additional plugins you would like to add:<br />
  ⬡ cordova-plugin-mfp-jsonstore 8.0.0 &quot;IBM MobileFirst Platform Foundation - JSONStore&quot;<br />
 ❯⬢ cordova-plugin-mfp-push 8.0.0<br />
[?] Enter a path to an app template to be added: cordova-hello-world-mfp<br />
$ cd PushNotifications<br />
[/code]<br />
2. Copy contents in sample app to your Cordova app (PushNotifications/www/, application-descriptor.xml)<br />
3. Follow instructions in <a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-8-0/foundation/notifications/push-notifications-overview/">Push Notifications Overview</a> to set up corresponding platform<br />
4. Create Local MFP Server, or Use Remote MFP Server<br />
[code lang="shell"]<br />
$ cd ..<br />
$ mfp create backendServer<br />
$ cd backendServer<br />
$ mfp start<br />
[/code]<br />
5. Create http adapter<br />
[code lang="shell"]<br />
$ mfp add adapter PushAdapter -t http<br />
[/code]<br />
6. Copy contents in sample app to your Cordova app (backendServer/PushAdapter/, /backendServer/server/conf/authenticationConfig.xml)<br />
7. Push Adapter to server<br />
[code lang="shell"]<br />
$ mfp push<br />
[/code]<br />
8. Run app on corresponding device<br />
[code lang="shell"]<br />
$ cd ..<br />
$ cd PushNotifications<br />
$ mfp cordova run<br />
[/code]<br />
9. To test the sample, go into <span class="inline-code">/backendServer</span> to call the adapter in the CLI:<br />
[code lang="shell" title="Broadcast language=notification"]<br />
$ mfp adapter call<br />
[?] Which endpoint do you want to use? PushAdapter/sendBroadcastNotification<br />
[?] Enter the comma-separated parameters: &quot;com_ibm_PushNotifications&quot;,&quot;hello&quot;<br />
[?] How should the procedure be called? GET[/code]</p>
<p>Or:</p>
<p>[code lang="shell" title="Tag language=notification"]$ mfp adapter call<br />
[?] Which endpoint do you want to use? PushAdapter/sendTagNotification<br />
[?] Enter the comma-separated parameters: &quot;com_ibm_PushNotifications&quot;,&quot;hello&quot;,&quot;sample-tag1,sample-tag2&quot;<br />
[?] How should the procedure be called? GET<br />
[/code]</p>
