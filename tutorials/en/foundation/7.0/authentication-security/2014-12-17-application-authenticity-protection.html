---
layout: doc_page
title: 'UPDATED: Application Authenticity Protection'
date: 2014-12-17 10:54:13.000000000 +02:00
type: doc_page
published: true
status: publish
categories: []
tags:
- 7-0
meta:
  _wpcom_is_markdown: '1'
  _edit_last: '6637'
  _syntaxhighlighter_encoded: '1'
  _wpas_done_all: '1'
author:
  login: iadar@il.ibm.com
  email: IADAR@il.ibm.com
  display_name: IdanAdar
  first_name: IDAN
  last_name: ADAR
---
<p class="breadcrumbs">
&lt; <a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-7-0/authentication-security/">Authentication and security</a></p>
<div>
    Relevant to:</p>
<ul id="relevantForPersona">
<li class="ios">Native iOS</li>
<li class="android">Native Android</li>
<li class="hybrid">Hybrid</li>
</ul>
</div>
<p>This tutorial covers the following topics:</p>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#project">Project-level setup</a></li>
<li><a href="#environmentSpecific">Environment-specific setup</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>By issuing an HTTP request, any entity can access the HTTP services (APIs) that IBM MobileFirst Platform Foundation Server offers. As described in previous tutorials, it is possible to protect relevant services with various security tests.</p>
<p>The application authenticity check ensures that the application that tries to connect to a MobileFirst Server instance is the authentic one and was not tampered with or modified by a third-party attacker.</p>
<p>Application authenticity protection is available for:</p>
<ul>
<li>Android - native + hybrid</li>
<li>iOS - native + hybrid</li>
<li>Windows Phone 8 - hybrid only</li>
</ul>
<p>Three levels of authenticity are available:</p>
<ol>
<li>No Authenticity</li>
<li>Basic Authenticity</li>
<li>Extended Authenticity (Provides a more detailed verification and is more secured.)</li>
</ol>
<h3>Important</h3>
<ul>
<li>Application authenticity protection is <strong>not available</strong> in the MobileFirst Development Server. To test, deploy the application to a MobileFirst Server instance on a remote application server.</li>
<li>Application authenticity protection is available only to licensed installations of MobileFirst Server.</li>
</ul>
<h3>Set up</h3>
<p>To set up application authenticity protection, you go through the following 2 steps:</p>
<ol>
<li>Project-level setup</li>
<li><a href="#environmentSpecific">Environment-specific setup</a></li>
</ol>
<h2 id="project">Project-level setup</h2>
<h3 id="authenticityProtectionCheckFlow">Authenticity protection check flow</h3>
<p><a href="https://developer.ibm.com/mobileplatform/wp-content/uploads/sites/32/2014/07/09_15_check_flow.png"><img class="aligncenter wp-image-1088 size-full" src="{{ site.baseurl }}/assets/backup/09_15_check_flow.png" alt="09_15_check_flow" width="1313" height="575" /></a><br />
The challenge token is processed by compiled native code, so that third-party attackers cannot see the logic of this processing.</p>
<p>Application authentication is based on certificate keys that are used to sign application bundles.<br />
Only the developers or the enterprise who have the original private key that was used to create the application are able to modify, repackage, and re-sign the bundle.</p>
<h3 id="enablingAuthenticityProtection">Enabling application authenticity protection</h3>
<p>Whether you want Basic or Extended authenticity protection, the following setup steps are required.<br />
Extended authenticity protection requires additional steps, as explained in the <a href="#enablingExtendedApplicationAuthenticityProtection">Enabling extended protection</a> section.</p>
<h4>Modify the <code>authenticationConfig.xml</code> configuration file</h4>
<ol>
<li>Add the relevant authentication realm to a security test.
<ul>
<li>If a <code>mobileSecurityTest</code> is used, add the <code>testAppAuthenticity</code> child element to it:<br />
[code lang="xml" highlight="2"]<br />
&lt;mobileSecurityTest name=&quot;MyMobileAuthenticityTest&quot;&gt;<br />
  &lt;testAppAuthenticity/&gt;<br />
  &lt;testDeviceId provisioningType=&quot;none&quot; /&gt;<br />
  &lt;testUser realm=&quot;myMobileLoginForm&quot; /&gt;<br />
&lt;/mobileSecurityTest&gt;<br />
[/code]
</li>
<li>If a <code>customSecurityTest</code> is used, add the <code>wl_authenticityRealm</code> realm to it:<br />
[code lang="xml" highlight="2"]<br />
&lt;customSecurityTest name=&quot;MyCustomAuthenticityTest&quot; &gt;<br />
  &lt;test realm=&quot;wl_authenticityRealm&quot; step=&quot;1&quot;/&gt;<br />
  &lt;test realm=&quot;wl_anonymousUserRealm&quot; isInternalUserID=&quot;true&quot; step=&quot;1&quot;/&gt;<br />
  &lt;test realm=&quot;wl_deviceNoProvisioningRealm&quot; step=&quot;2&quot; isInternalDeviceID=&quot;true&quot;/&gt;<br />
&lt;/customSecurityTest&gt;<br />
[/code]
</li>
</ul>
</li>
<li>After you have configured the authenticity realm and security check, go to <a href="#environmentSpecific">Environment-specific setup</a> and select your environment to complete the authenticity configuration.</li>
</ol>
<h3 id="enablingExtendedApplicationAuthenticityProtection">Enabling extended application authenticity protection</h3>
<p>To enable extended authenticity checking, you must deploy a modified <code>.wlapp</code> file, instead of the original <code>.wlapp</code> file that is generated by the build process.</p>
<ol>
<li>Modify the <code>.wlapp</code> file by using the <code>wladm</code> program or the <code>wladm</code> Ant task: </li>
<ul>
<li><strong>By using the <code>wladm</code> program</strong><br />
Use the <code>wladm</code> program (provided in the MobileFirst installation directory) to run the <code>enable extended-authenticity</code> command:<br />
[code lang="Java"]<br />
wladm enable extended-authenticity src-wlapp-file device-file &gt; dest-wlapp-file<br />
[/code]<br />
<em>src-wlapp-file</em>  => Original binary app file (.wlapp)<br />
<em>device-file</em>     => Binary mobile app file (.apk, .ipa, or .xap)<br />
<em>dest-wlapp-file</em> => Output binary app file (.wlapp)</p>
<p>After running the <code>wladm</code> , deploy the output file to MobileFirst Server instance.</p>
</li>
<li><strong>By using the <code>wladm</code> Ant task</strong><br />
Use the <code>wladm</code> Ant task (provided in the MobileFirst installation directory) to run the <code>enable-extended-authenticity</code> command:<br />
[code lang="XML"]<br />
&lt;enable-extended-authenticity srcwlappfile=&quot;original-.wlapp-file&quot;<br />
    devicefile=&quot;device file(.apk, .ipa, or .xap)&quot;<br />
    destwlappfile=&quot;output-.wlapp-file&quot;/&gt;<br />
[/code]
  </li>
</ul>
<li>After running the <code>wladm</code> command or Ant task, deploy the output file to MobileFirst Server instance.</li>
<blockquote><p>For more information, see the topic about configuring extended app authenticity checking in the user documentation.</p></blockquote>
</ol>
<h3 id="checkAuthenticityLevel">Check the application authenticity level by using the MobileFirst Operations Console</h3>
<p>You can use the MobileFirst Operations Console to see the authenticity level of an application.<br />
[caption id="attachment_7552" align="aligncenter" width="1000"]<a href="https://developer.ibm.com/mobilefirstplatform/wp-content/uploads/sites/32/2014/12/ExtendedAuthenticityIMG2.png"><img src="{{ site.baseurl }}/assets/backup/ExtendedAuthenticityIMG2.png" alt="Check authenticity level through MobileFirst Console" width="1000" height="342" class="size-full wp-image-7552" /></a> Check authenticity level through MobileFirst Console[/caption]</p>
<h2 id="environmentSpecific">Environment-specific setup</h2>
<p>For basic authenticity, the following steps are required.<br />
For extended authenticity, it is recommended to make these extra configuration changes.</p>
