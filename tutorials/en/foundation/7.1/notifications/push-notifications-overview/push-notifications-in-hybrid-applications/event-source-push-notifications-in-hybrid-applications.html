---
layout: tutorial
title: Event Source Push Notifications in Hybrid Applications
show_children: true
relevantTo: [hybrid]
---
<ul>
<li class="download-sample">
          <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v700/PushNotificationsHybridProject.zip">Download sample</a>
        </li>
</ul>

<h2>Overview</h2>
<p>This tutorial expends on the implementation of event source push notification client-side API, and covers the following topics:</p>
<ul>
<li>Sending the token and initializing the <code>WLPush</code> class</li>
<li>Registering the event source</li>
<li>Subscribing to/unsubscribing from the event source</li>
</ul>
<h2>Notification API - Client-side</h2>
<h3>Methods</h3>
<ul>
<li><code>WL.Client.Push.isPushSupported()</code> – returns <code>true</code> if push notifications are supported by the platform, or <code>false</code> otherwise.</li>
<li><code>WL.Client.Push.isSubscribed(alias)</code> – returns whether the currently logged-in user is subscribed to a specified event source alias.</li>
</ul>
<p>When a push notification is received by a device, the callback function defined in <code>WL.Client.Push.registerEventSourceCallback</code> is invoked:</p>
<p>{% highlight js %}function pushNotificationReceived(props, payload) {<br />
    alert("pushNotificationReceived invoked");<br />
    alert("props :: " + JSON.stringify(props));<br />
    alert("payload :: " + JSON.stringify(payload));<br />
}{% endhighlight %}</p>
<p>If the application was in background mode (or inactive) when the push notification arrived, this callback function is invoked when the application returns to the foreground.</p>
<h2 id="backendEmulator">Back-end emulator</h2>
<p>The sample project for this tutorial is bundled with a back-end emulator which can be used to simulate push notification submissions by a back-end system. The source for the emulator can be found in the sample project.</p>
<p>To run the back-end emulator, open the PushBackendEmulator folder of the sample project in a command prompt, and then run the supplied JAR file by using the following syntax:</p>
<p>{% highlight bash %}java –jar PushBackendEmulator.jar <userId> <message> <contextRoot> <port>{% endhighlight %}</p>
<p><code>userId</code> is the user name that you used to log in to the sample application.<br />
<code>contextRoot</code> is the context root of your MobileFirst project.</p>
<h3>Example</h3>
<p>{% highlight bash %}java –jar PushBackendEmulator.jar JohnDoe “My first push notification” myContextRoot 10080{% endhighlight %}</p>
<p>The back-end emulator tries to connect to a MobileFirst Server and call a <code>submitNotification()</code> adapter procedure. It outputs the invocation result to a command prompt console.</p>
<h4>Success</h4>
<p><img src="{{ site.baseurl }}/assets/backup/08_01_push_success-1024x136.png" /></p>
<h4>Failure</h4>
<p><img src="{{ site.baseurl }}/assets/backup/08_01_push_failure-1024x130.png" /></p>
<p><img src="{{ site.baseurl }}/assets/backup/08_01_push_sample.png" /></p>
<h2>Sample application</h2>
<p><a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v700/PushNotificationsHybridProject.zip">Click to download</a> the sample application.</p>
