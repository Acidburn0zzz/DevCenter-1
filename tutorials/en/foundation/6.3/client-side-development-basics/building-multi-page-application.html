---
layout: tutorial
title: Building a multipage application
date: 2014-07-23 05:47:51.000000000 +03:00
type: tutorial
published: true
status: publish
categories: []
tags: []
meta:
  _wpcom_is_markdown: '1'
  _edit_last: '9037'
  _wpas_done_all: '1'
  _syntaxhighlighter_encoded: '1'
author:
  login: iadar@il.ibm.com
  email: IADAR@il.ibm.com
  display_name: IdanAdar
  first_name: IDAN
  last_name: ADAR
---
<p class="breadcrumbs">
 &lt; <a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-6-3/client-side-development-basics/">Client-side development basics</a></p>
<div id="samplesAndPersonas">
<div>
    Relevant to:</p>
<ul id="relevantForPersona">
<li class="hybrid"><a href="https://developer.ibm.com/mobilefirstplatform/documentation/getting-started-hybrid-development-6-3/">Hybrid</a></li>
</ul></div>
<ul>
<li class="download-sample">
          <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/BuildingMultiPageApplicationProject.zip">Download Studio project</a>
        </li>
</ul>
</div>
<h2>Overview</h2>
<p>In this tutorial we will learn:</p>
<ul>
<li><a href="#basicsOfMultiPageApplication">The basics of a multi-page application</a></li>
<li><a href="#loadingExternalHTML">How to load an external HTML file</a></li>
<li><a href="#implementPageNavigationHistory">How to implement page navigation with history</a></li>
</ul>
<h2 id="basicsOfMultiPageApplication">The basics of a multi-page application</h2>
<p>A MobileFirst hybrid application uses a single DOM model.<br />
A single DOM model means that you must never navigate between various HTML files by using hyperlinks or changing the <span class="inline-code">window.location</span> property.</p>
<p>Instead, you must implement <strong>multi-page interfaces</strong> by loading external HTML file <strong>content</strong>, and by using Ajax requests and injecting them into the existing DOM.<br />
This is required because the main application HTML file loads the MobileFirst client-side JavaScript™ framework files, and when the browser navigates from one HTML file to another, the JavaScript context and loaded scripts are lost.</p>
<p>Most JavaScript UI frameworks that are available today (for example, jQuery Mobile and Dojo Mobile) provide extensive APIs to achieve the required multi-page navigation.</p>
<p>In this tutorial, a multi-page MobileFirst application implementation is explained by using <strong>built-in functionality only</strong> with jQuery.</p>
<p><strong>Important</strong>: Do not use the built-in functionality that is described in this tuotiral if you intend on using a JavaScript UI framework. Use the framework's APIs instead.</p>
<h3>Applications with multiple pages can be built in two ways:</h3>
<ol>
<li>Single HTML file that contains all the application "pages"</li>
<li>A separate HTML file for each application "page"</li>
</ol>
<p><a href="http://developer.ibm.com/worklight/wp-content/uploads/sites/32/2014/07/03_02_application_types.png"><img src="{{ site.baseurl }}/assets/backup/03_02_application_types.png" alt="03_02_application_types" width="808" height="374" class="aligncenter size-full wp-image-700" /></a></p>
<p>A single HTML file is the preferred model for simpler applications, where the developer is responsible for showing the "current" page <span class="inline-code">DIV</span> and hiding the rest.</p>
<p>However, larger applications present a challenge:</p>
<ul>
<li>The developer must take full responsibility for which DIVs are shown and which <span class="inline-code">DIV</span>s are hidden at any moment</li>
<li>If new content is needed in a page, for example a table, a prepared template cannot be loaded, rather it must be generated manually</li>
<li>A single large HTML file with many pages takes longer to load</li>
<li>It is easy to get lost in a single HTML file that contains multiple "pages". Separate files are easier to manage</li>
</ul>
<p>Building a rich dynamic application with multiple pages can be easier with dynamic page loading:</p>
<ul>
<li>Built-in jQuery APIs can be used  to dynamically load, update, and insert DOM elements in your application</li>
<li>HTML pages with CSS and JavaScript can be inserted as needed</li>
<li>Navigation history can be implemented</li>
<li>JavaScript code can be executed when pages are loaded or unloaded</li>
</ul>
<h3>Implementation notes:</h3>
<ul>
<li>When you implement multi-page navigation in the Windows Phone 8 environment, you <strong>must</strong> change the URL each time you use the jQuery <span class="inline-code">load()</span> API method. <em>The example project for this training module demonstrates in detail how you can perform this task.</em>
<p>Add <span class="inline-code">/www/default/</span> at the beginning of the URL path string. For example:<br />
Change<br />
[code lang="js"]$(&quot;#pagePort&quot;).load(&quot;pages/MainPage.html&quot;, function(){<br />
    (currentPage.init);<br />
});[/code]</p>
<p>To<br />
[code lang="js"]$(&quot;#pagePort&quot;).load(&quot;/www/default/pages/MainPage.html&quot;, function(){<br />
    (currentPage.init);<br />
});[/code]</li>
<li>When implementing multipage navigation for the Windows Phone 8 environment, and jQuery Mobile is used with the <span class="inline-code">changePage()</span> API method, a jQuery Mobile defect prevents it from properly working.<br />
To overcome the defect, consult the changes that need to be made in the .js file of jQuery Mobile, as described in the following Stack Overflow question: <a href="http://stackoverflow.com/questions/17965560/ibm-worklight-v-5-0-6-cant-navigate-multipages-on-windows-phone-7-5-environme">IBM Worklight v 5.0.6 - Can't navigate multipages on Windows Phone 7.5 environment</a></li>
</ul>
<h2 id="loadingExternalHTML">Loading an external HTML file</h2>
<p>An external HTML file is a segment of HTML code that can be injected into any location in the existing DOM. A single HTML file can contain a multiple HTML elements hierarchy.</p>
<ul>
<li>JavaScript code or files can be included by using the <span class="inline-code">script</span> tag</li>
<li>CSS files can be included by using the <span class="inline-code">link</span> tag</li>
<li>The HTML file can be injected into the parent element, usually a <span class="inline-code">DIV</span>, but this is not mandatory</li>
<li>jQuery's <span class="inline-code">$().load()</span> API method can be used to implement the above</li>
</ul>
<p>To load an HTML file, use the following syntax:<br />
[code lang="js"]$(containerSelector).load(filePath, callbackFunction);[/code]</p>
<p><span class="inline-code">containerSelector</span> – jQuery CSS selector of element to host the loaded content.<br />
<span class="inline-code">filePath</span> – Relative path to an HTML file. Always relative to the main HTML file.<br />
<span class="inline-code">callbackFunction</span> - a JavaScript function to run when the loading completes.</p>
<h3>Example:</h3>
<h4>JavaScript</h4>
<p>[code lang="js"]$(&quot;#pagePort&quot;).load(path + &quot;pages/MainPage.html&quot;, function(){<br />
    $.getScript(path + &quot;js/MainPage.js&quot;, function() {<br />
        if (currentPage.init) {<br />
            currentPage.init();<br />
        }<br />
    });<br />
});[/code]</p>
<h4>HTML</h4>
<p>[code lang="html"]&lt;!-- This is a placeholder for dynamic page content --&gt;<br />
&lt;div id=&quot;pagePort&quot;&gt;&lt;/div&gt;[/code]</p>
<p>This code loads the <strong>MainPage.html</strong> file and inserts its content into the <span class="inline-code">pagePort DIV</span> element.<br />
JavaScript (and CSS, if needed) references from the <strong>MainPage.html</strong> are loaded into the DOM.</p>
<h2 id="implementPageNavigationHistory">Implementing page navigation with history</h2>
<p>By using the previously described technique to load an external HTML file, it is possible to implement a navigation interface with history.</p>
<p><a href="http://developer.ibm.com/worklight/wp-content/uploads/sites/32/2014/07/03_02_mutlipage_history.png"><img src="{{ site.baseurl }}/assets/backup/03_02_mutlipage_history.png" alt="03_02_mutlipage_history" width="780" height="170" class="aligncenter size-full wp-image-704" /></a></p>
<p>The navigation history must be preserved as a stack in a global array object.<br />
A reference to the currently loaded page must be preserved as well by using a global object variable.<br />
A reference to the file path is needed for Windows Phone 8.</p>
<p>[code lang="js"]var pagesHistory = [];<br />
var currentPage = {};<br />
var path = &quot;&quot;;[/code]</p>
<h3>Implementing page navigation with history: Step 1</h3>
<p><a href="http://developer.ibm.com/worklight/wp-content/uploads/sites/32/2014/07/03_02_navigation_history_1.png"><img src="{{ site.baseurl }}/assets/backup/03_02_navigation_history_1.png" alt="03_02_navigation_history_1" width="500" height="127" class="aligncenter size-full wp-image-705" /></a></p>
<ol>
<li>On application launch, <strong>MainPage.html</strong> is loaded from the application code and injected into the <span class="inline-code">#pagePort DIV</span>.
<p>[code lang="js"]<br />
function wlCommonInit() {<br />
    // Special case for Windows Phone 8 only.<br />
    if (WL.Client.getEnvironment() == WL.Environment.WINDOWS_PHONE_8) {<br />
        path = &quot;/www/default/&quot;;<br />
    }</p>
<p>    $(&quot;#pagePort&quot;).load(&quot;pages/MainPage.html&quot;,function(){<br />
       if (currentPage.init) {<br />
           currentPage.init();<br />
       }<br />
    });<br />
}[/code]</li>
<li><strong>MainPage.js</strong> is loaded as a part of MainPage.html.
<p>[code lang="js"]currentPage = {};<br />
currentPage.init = function() {<br />
    WL.Logger.debug(&quot;MainPage :: init&quot;);<br />
};[/code]</li>
<li>
<p>The currentPage object is declared.</p>
</li>
<li>The currentPage.init function is declared.</li>
<li>When the MainPage.html loading completes, the currentPage.init method is called.</li>
</ol>
<h3>Implementing page navigation with history: Step 2</h3>
<p><a href="http://developer.ibm.com/worklight/wp-content/uploads/sites/32/2014/07/03_02_navigation_history_2.png"><img src="{{ site.baseurl }}/assets/backup/03_02_navigation_history_2.png" alt="03_02_navigation_history_2" width="500" height="126" class="aligncenter size-full wp-image-706" /></a></p>
<ol>
<li><strong>MainPage.html</strong> is pushed into <span class="inline-code">pagesHistory</span> stack.</li>
<li><strong>Page1.html</strong> is loaded and injected into <span class="inline-code">#pagePort DIV</span>Page1.js is loaded as a part of <strong>Page1.html</strong>.</li>
<li>The <span class="inline-code">currentPage</span> object is declared and overrides the old one.</li>
<li>The <span class="inline-code">currentPage.init</span> function is declared.
<p>[code lang="js"]currentPage = {};<br />
currentPage.init = function(){<br />
    WL.Logger.debug(“page1 :: init&quot;);<br />
};[/code]</li>
</ol>
<li>
<p>When the loading of <strong>Page1.html</strong> completes, a new <span class="inline-code">currentPage.init</span> method is called.</p>
</li>
<h3>Implementing page navigation with history: Step 3</h3>
<p><a href="http://developer.ibm.com/worklight/wp-content/uploads/sites/32/2014/07/03_02_navigation_history_3.png"><img src="{{ site.baseurl }}/assets/backup/03_02_navigation_history_3.png" alt="03_02_navigation_history_3" width="501" height="128" class="aligncenter size-full wp-image-708" /></a></p>
<ol>
<li>The previous HTML file name is popped from the <span class="inline-code">PagesHistory</span> stack (<strong>MainPage.html</strong>).</li>
<li>It is loaded and injected into <span class="inline-code">#pagePort DIV</span>.
<p>[code lang="js"]currentPage.back = function(){<br />
    WL.Logger.debug(&quot;Page1 :: back&quot;);<br />
    $(&quot;#pagePort&quot;).load(pagesHistory.pop(),<br />
        function() {<br />
            if (currentPage.init) {<br />
               currentPage.init();<br />
            }<br />
    });<br />
};[/code]</li>
</ol>
<li>
<p><strong>MainPage.js</strong> is loaded as a part of <strong>MainPage.html</strong>.</p>
</li>
<li>The <span class="inline-code">currentPage</span> object is declared and overrides the old one.</li>
<li>
<p>The <span class="inline-code">currentPage.init</span> function is declared.</p>
<p>[code lang="js"]currentPage = {};<br />
currentPage.init = function(){<br />
    WL.Logger.debug(&quot;MainPage :: init&quot;);<br />
};[/code]</p>
</li>
<li>
<p>When <strong>MainPage.html</strong> loading completes, the <span class="inline-code">currentPage.init</span> method is called.</p>
</li>
<h2>Sample application</h2>
<p>Click to download the sample application for this tutorial.</p>
<ul>
<li class="download-sample">
          <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/BuildingMultiPageApplicationProject.zip">Download Studio project</a>
        </li>
</ul>
<p><a href="http://developer.ibm.com/worklight/wp-content/uploads/sites/32/2014/07/03_02_sample_app.png"><img src="{{ site.baseurl }}/assets/backup/03_02_sample_app.png" alt="03_02_sample_app" width="895" height="414" class="aligncenter size-full wp-image-709" /></a></p>
<h2>Sample application</h2>
<p><a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/BuildingMultiPageApplicationProject.zip">Click to download</a> the Studio project.</p>
