---
layout: tutorial
title: Invoking adapter procedures from native iOS applications
relevantTo: [ios]
---
<ul>
<li class="download-sample">
      <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/InvokingAdapterProceduresNativeProject.zip">Download Studio project</a>
    </li>
<li class="download-sample">
      <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/InvokingAdapterProceduresiOSProject.zip">Download native project</a>
    </li>
</ul>
<br>
To create and configure an iOS native project, first follow the "<a href="http://developer.ibm.com/mobilefirstplatform/documentation/getting-started-6-3/hello-world/creating-first-native-ios-mobilefirst-application/" title="Creating your first native iOS MobileFirst application">Creating your first Native iOS MobileFirst application</a>" tutorial .</p>
<h2>Initializing WLClient</h2>
<ol>
<li>Access the <code>WLClient</code> functionality by using<br />
<code>[WLClient sharedInstance]</code> anywhere in your application.
</li>
<li>Initiate the connection to the server by using the <code>wlConnectWithDelegate</code> method.<br />
For most actions, you must specify a delegate object, such as a <code>MyConnectListener</code> instance in the following example:</p>
<p>[code lang="obj-c"]<br />
MyConnectListener *connectListener = [[MyConnectListener alloc] initWithController:self];<br />
[[WLClient sharedInstance] wlConnectWithDelegate:connectListener];<br />
[/code]</p>
<p><strong>Note:</strong> Remember to import <strong>WLClient.h</strong> and <strong>WLDelegate.h</strong> in your header file.</p>
<p>You must supply a connection delegate (listener) to the MobileFirst invocation methods.
</li>
<li>Create a delegate to be used in the <code>wlConnectWithDelegate</code> method and receive the response from the MobileFirst Server. Name the class <code>MyConnectListener</code>.<br />
The header file must specify that it implements the <code>WLDelegate</code> protocol.</p>
<p>[code lang="obj-c"]<br />
@interface MyConnectListener : NSObject &lt;WLDelegate&gt; {<br />
    @private<br />
    ViewController *vc;<br />
}</p>
<p>[/code]</p>
<p>The <code>WLDelegate</code> protocol specifies that the class implements the following methods:<br />
- The <strong>onSuccess</strong> method: <code>(WLResponse *)response</code><br />
- The <strong>onFailure</strong> method: <code>(WLFailResponse *)response</code></p>
<p>After <code>wlConnectWithDelegate</code> finishes, the <code>onSuccess</code> method or the <code>onFailure</code> method of the supplied <code>MyConnectListener</code> instance is invoked.<br />
In both cases, the response object is sent as an argument.
</li>
<li>Use this object to operate data that is retrieved from the server.
<p>[code lang="obj-c"]<br />
-(void)onSuccess:(WLResponse *)response{<br />
    NSLog(@&quot;\nConnection Success: %@&quot;, response);<br />
    NSString *resultText = @&quot;Connection success. &quot;;</p>
<p>    if ([response responseText] != nil){<br />
        resultText = [resultText stringByAppendingString:[response responseText]];<br />
    }<br />
    [vc updateView:resultText];<br />
}</p>
<p>-(void)onFailure:(WLFailResponse *)response{<br />
    NSString *resultText = @&quot;Connection failure. &quot;;</p>
<p>    if ([response responseText] != nil){<br />
        resultText = [resultText stringByAppendingString:[response responseText]];<br />
    }<br />
    [vc updateView:resultText];<br />
}<br />
[/code]</p>
<h2>Invoking an adapter procedure</h2>
<p>To invoke a procedure, create a <code>WLProcedureInvocationData</code> object and specify the adapter name and the procedure name.<br />
Invoke the procedure by using the shared instance of the <code>WLClient</code>.</p>
<p>[code lang="obj-c"]<br />
    WLProcedureInvocationData *myInvocationData = [[WLProcedureInvocationData alloc] initWithAdapterName:@&quot;RSSReader&quot; procedureName:@&quot;getStories&quot;];<br />
    MyInvokeListener *invokeListener = [[MyInvokeListener alloc] initWithController: self];<br />
    [[WLClient sharedInstance] invokeProcedure:myInvocationData withDelegate:invokeListener];<br />
[/code]</p>
<p>As previously stated, you must supply a delegate object to manage the retrieved data.</p>
<h2>Receiving a procedure response</h2>
<p>When the procedure invocation is complete, a delegate method of <code>MyInvokeListener</code> class instance is called.<br />
Any delegate header file must specify that it complies with a <code>WLDelegate</code> protocol.</p>
<p>[code lang="obj-c"]<br />
@interface MyInvokeListener : NSObject &lt;WLDelegate&gt; {<br />
@private<br />
    ViewController *vc;<br />
    NSString *strResponse;<br />
}</p>
<p>- (id)initWithController: (ViewController *) mainView;</p>
<p>@end<br />
[/code]</p>
<p>After the procedure invocation finishes, the <code>onSuccess</code> method or the <code>onFailure</code> method of the supplied <code>MyInvokeListener</code> instance is called.<br />
In both cases, a response object is sent as an argument.<br />
Use this object to operate data that is retrieved from the server.</p>
<p>[code lang="obj-c"]<br />
-(void)onSuccess:(WLResponse *)response {<br />
    NSLog(@&quot;Invocation Success: %@&quot;, response);<br />
    NSString *resultText = @&quot;Invocation success. &quot;;</p>
<p>    if ([response responseText] != nil){<br />
        resultText = [resultText stringByAppendingString:[response responseText]];<br />
    }<br />
    [vc updateView:resultText];<br />
}</p>
<p>-(void)onFailure:(WLFailResponse *)response{<br />
    NSLog(@&quot;Invocation Failure: %@&quot;, response);<br />
    NSString *resultText = @&quot;Invocation failure. &quot;;</p>
<p>    if ([response responseText] != nil){<br />
        resultText = [resultText stringByAppendingString:[response responseText]];<br />
    }<br />
    [vc updateView:resultText];<br />
}<br />
[/code]</p>
<h2>Sample application</h2>
<p>The sample contains two projects:<br />
- The <strong>InvokingAdapterProceduresNativeProject.zip</strong> file contains a MobileFirst native API that you can deploy to your MobileFirst server.<br />
- The <strong>InvokingAdapterProceduresiOSProject.zip</strong> file contains a native iOS application that uses a MobileFirst native API library to communicate with the MobileFirst Server.</p>
<p>Make sure to update the <strong>worklight.plist</strong> file in <strong>iOSNativeApp</strong> with the relevant server settings.</p>
<p>    <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/InvokingAdapterProceduresNativeProject.zip">Click to download</a> the Studio project.<br />
    <a href="http://public.dhe.ibm.com/software/products/en/MobileFirstPlatform/docs/v630/InvokingAdapterProceduresiOSProject.zip">Click to download</a> the Native project.</p>
<p><a href="http://developer.ibm.com/mobilefirstplatform/wp-content/uploads/sites/32/2014/11/04_08_results_swift.pptx_.png"><img src="{{ site.baseurl }}/assets/backup/04_08_results_swift.pptx_.png" alt="04_08_results_swift.pptx" width="363" height="712" class="aligncenter size-full wp-image-3316" /></a></li>
</ol>
